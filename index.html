<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="THE BLOCK - Where Writer's Block Becomes Writer's Gift">
    <meta name="theme-color" content="#0a0a0b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <title>THE BLOCK | Dashboard</title>
    
    <style>
        /* =====================================================
           THE BLOCK - DASHBOARD + ARCHITECT SIDEBAR
           Psychedelic Americana / Digital Artisan
           Part of BIG LOVE Holdings
           ===================================================== */
        /* =====================================================
           PROJECT SWITCHER SIDEBAR - LEFT
           ===================================================== */
        
        .project-switcher-sidebar {
            width: 250px;
            height: 100vh;
            background: var(--bg-nebula);
            border-right: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: var(--space-4);
        }
        
        .switcher-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-5);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--glass-border);
        }
        
        .switcher-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-bright);
        }
        
        .switcher-new-btn {
            width: 28px;
            height: 28px;
            background: var(--lux-gold);
            border: none;
            border-radius: 6px;
            color: var(--bg-void);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .switcher-new-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--glass-glow);
        }
        
        .switcher-current {
            margin-bottom: var(--space-6);
        }
        
        .current-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-2);
        }
        
        .current-project {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3);
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--lux-gold);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .current-project:hover {
            background: rgba(245, 158, 11, 0.15);
            box-shadow: 0 0 15px var(--glass-glow);
        }
        
        .project-icon {
            font-size: 1.2rem;
        }
        
        .project-name {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-bright);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .switcher-divider {
            height: 1px;
            background: var(--glass-border);
            margin: var(--space-4) 0;
        }
        
        .switcher-projects {
            flex: 1;
            overflow-y: auto;
        }
        
        .projects-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-3);
        }
        
        .projects-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }
        
        .project-item-sidebar {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3);
            background: var(--bg-glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            color: inherit;
        }
        
        .project-item-sidebar:hover {
            background: var(--bg-glass-hover);
            border-color: var(--lux-gold);
            transform: translateX(4px);
        }
        
        .project-item-sidebar.active {
            background: rgba(245, 158, 11, 0.1);
            border-color: var(--lux-gold);
        }
        
        .project-item-name {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
        }
        
        .project-item-words {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-family: var(--font-mono);
        }
        :root {


            /* =====================================================
           ZEN MODE - Forest Light Theme
           ===================================================== */
        
        body.zen-theme {
            --bg-void: #f5f1eb;
            --bg-cosmos: #ebe6dc;
            --bg-nebula: #e0d9cc;
            --bg-stardust: #d4cdbf;
            --bg-glass: rgba(0, 0, 0, 0.03);
            --bg-glass-hover: rgba(0, 0, 0, 0.06);
            
            /* Forest Accent Colors */
            --lux-gold: #5d7a5d;
            --lux-amber: #7a956e;
            --lux-rose: #a67c6b;
            --lux-violet: #8b7e7a;
            --lux-cyan: #6b8a8a;
            --lux-emerald: #5d7a5d;
            
            /* Text */
            --text-bright: #2c2c2c;
            --text-primary: #3d3d3d;
            --text-secondary: #5a5a5a;
            --text-muted: #8a8a8a;
            
            /* Glass Effects */
            --glass-border: rgba(0, 0, 0, 0.08);
            --glass-glow: rgba(93, 122, 93, 0.15);
        }
        
        body.zen-theme .cosmic-bg {
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(93, 122, 93, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(166, 124, 107, 0.06) 0%, transparent 50%),
                #f5f1eb;
        }
        
        body.zen-theme .stat-card:hover {
            border-color: #5d7a5d;
            box-shadow: 0 0 30px rgba(93, 122, 93, 0.15);
        }
        
        body.zen-theme .action-card:hover {
            border-color: #5d7a5d;
        }
        
        body.zen-theme .tool-item.active {
            background: rgba(93, 122, 93, 0.1);
            color: #5d7a5d;
        }
        
        body.zen-theme .tool-item:hover {
            color: #5d7a5d;
        }
        
        body.zen-theme .tool-badge {
            background: #5d7a5d;
        }
        
        body.zen-theme .toggle.active {
            background: #5d7a5d;
        }
        
        body.zen-theme .passport-tier {
            color: #5d7a5d;
        }
        
        body.zen-theme .welcome-title strong {
            background: linear-gradient(135deg, #5d7a5d, #7a956e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        body.zen-theme .biglove-text span {
            color: #a67c6b;
        }

            /* Cosmic Color System */
            --bg-void: #050506;
            --bg-cosmos: #0a0a0b;
            --bg-nebula: #0f0f12;
            --bg-stardust: #161619;
            --bg-glass: rgba(255, 255, 255, 0.03);
            --bg-glass-hover: rgba(255, 255, 255, 0.06);
            
            /* The Lux - Accent Colors */
            --lux-gold: #f59e0b;
            --lux-amber: #fbbf24;
            --lux-rose: #f43f5e;
            --lux-violet: #8b5cf6;
            --lux-cyan: #06b6d4;
            --lux-emerald: #10b981;
            
            /* Text */
            --text-bright: #ffffff;
            --text-primary: #e4e4e7;
            --text-secondary: #a1a1aa;
            --text-muted: #52525b;
            
            /* Glass Effects */
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-glow: rgba(245, 158, 11, 0.15);
            
            /* Spacing */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;
            --space-8: 32px;
            
            /* Layout */
            --architect-width: 280px;
            --header-height: 60px;
            
            /* Effects */
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --transition: all 0.2s ease;
            
            /* Fonts */
            --font-sans: 'Inter', -apple-system, sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            overflow: hidden;
        }
        
        body {
            font-family: var(--font-sans);
            background: var(--bg-void);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        /* =====================================================
           COSMIC BACKGROUND - THE LUX
           ===================================================== */
        
        .cosmic-bg {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(6, 182, 212, 0.04) 0%, transparent 70%),
                var(--bg-void);
            animation: cosmicShift 30s ease-in-out infinite;
        }
        
        @keyframes cosmicShift {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        /* =====================================================
           APP LAYOUT
           ===================================================== */
        
  .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
            flex-direction: row;
        }
        
        .app-container > .project-switcher-sidebar {
            order: 1;
        }
        
        .app-container > .main-content {
            order: 2;
            flex: 1;
        }
        
        .app-container > .architect {
            order: 3;
        }
        /* =====================================================
           MAIN CONTENT AREA
           ===================================================== */
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* Header */
        .header {
            height: var(--header-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--space-6);
            border-bottom: 1px solid var(--glass-border);
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }
        
        .logo-icon {
            color: var(--lux-gold);
            filter: drop-shadow(0 0 10px rgba(245, 158, 11, 0.4));
        }
        
        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            color: var(--text-bright);
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }
        
        .btn-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .btn-icon:hover {
            background: var(--bg-glass-hover);
            color: var(--text-bright);
            border-color: var(--lux-gold);
        }
        
        /* Dashboard Content */
        .dashboard {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-8);
        }
        
        .welcome-section {
            margin-bottom: var(--space-8);
        }
        
        .welcome-title {
            font-size: 2rem;
            font-weight: 300;
            color: var(--text-bright);
            margin-bottom: var(--space-2);
        }
        
        .welcome-title strong {
            font-weight: 600;
            background: linear-gradient(135deg, var(--lux-gold), var(--lux-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .welcome-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-5);
            margin-bottom: var(--space-8);
        }
        
        .stat-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            transition: var(--transition);
        }
        
        .stat-card:hover {
            border-color: var(--lux-gold);
            box-shadow: 0 0 30px var(--glass-glow);
        }
        
        .stat-icon {
            font-size: 1.5rem;
            margin-bottom: var(--space-3);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            font-family: var(--font-mono);
            color: var(--text-bright);
            margin-bottom: var(--space-1);
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Quick Actions */
        .quick-actions {
            margin-bottom: var(--space-8);
        }
        
        .section-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: var(--space-4);
        }
        
        .action-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-4);
        }
        
        .action-card {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            color: inherit;
        }
        
        .action-card:hover {
            background: var(--bg-glass-hover);
            border-color: var(--lux-gold);
            transform: translateY(-2px);
        }
        
        .action-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-stardust);
            border-radius: var(--radius-md);
            font-size: 1.25rem;
        }
        
        .action-info h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-bright);
            margin-bottom: var(--space-1);
        }
        
        .action-info p {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        /* =====================================================
           THE ARCHITECT - RIGHT SIDEBAR
           ===================================================== */
        
        .architect {
            width: var(--architect-width);
            height: 100vh;
            background: var(--bg-glass);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-left: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* Soul ID - Top Section */
        .soul-id {
            padding: var(--space-5);
            border-bottom: 1px solid var(--glass-border);
        }
        
        .passport {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3);
            background: var(--bg-stardust);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .passport:hover {
            background: var(--bg-glass-hover);
        }
        
        .passport-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--lux-violet), var(--lux-gold));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
        }
        
        .passport-info {
            flex: 1;
        }
        
        .passport-name {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-bright);
        }
        
        .passport-tier {
            font-size: 0.7rem;
            color: var(--lux-gold);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Zen Switch */
        .zen-switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: var(--space-4);
            padding: var(--space-3);
            background: var(--bg-stardust);
            border-radius: var(--radius-md);
        }
        
        .zen-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .toggle {
            width: 44px;
            height: 24px;
            background: var(--bg-nebula);
            border-radius: 12px;
            cursor: pointer;
            position: relative;
            transition: var(--transition);
        }
        
        .toggle.active {
            background: var(--lux-gold);
        }
        
        .toggle-knob {
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 3px;
            left: 3px;
            transition: var(--transition);
        }
        
        .toggle.active .toggle-knob {
            left: 23px;
        }
        
        /* Architect Tools - Middle Section */
        .architect-tools {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-4);
        }
        
        .tool-section {
            margin-bottom: var(--space-5);
        }
        
        .tool-section-title {
            font-size: 0.65rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: var(--space-3);
            padding-left: var(--space-3);
        }
        
        .tool-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3) var(--space-3);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
            text-decoration: none;
        }
        
        .tool-item:hover {
            background: var(--bg-glass-hover);
            color: var(--text-bright);
        }
        
        .tool-item.active {
            background: rgba(245, 158, 11, 0.1);
            color: var(--lux-gold);
        }
        
        .tool-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        .tool-label {
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .tool-badge {
            margin-left: auto;
            background: var(--lux-gold);
            color: var(--bg-void);
            font-size: 0.65rem;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
        }
        
        /* Shelf Dropdown */
        .shelf-projects {
            margin-left: var(--space-8);
            margin-top: var(--space-2);
            display: none;
        }
        
        .shelf-projects.open {
            display: block;
        }
        
        .project-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-muted);
            font-size: 0.8rem;
        }
        
        .project-item:hover {
            background: var(--bg-glass);
            color: var(--text-primary);
        }
        
        .project-item.new-draft {
            color: var(--lux-gold);
            font-weight: 500;
        }
        
        /* The Portal - Bottom Section */
        .architect-footer {
            padding: var(--space-4);
            border-top: 1px solid var(--glass-border);
        }
        
        .portal-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-2);
        }
        
        .portal-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-3);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            color: var(--text-muted);
        }
        
        .portal-item:hover {
            background: var(--bg-glass-hover);
            color: var(--text-bright);
        }
        
        .portal-icon {
            font-size: 1.25rem;
        }
        
        .portal-label {
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .biglove-footer {
            text-align: center;
            margin-top: var(--space-4);
            padding-top: var(--space-4);
            border-top: 1px solid var(--glass-border);
        }
        
        .biglove-text {
            font-size: 0.65rem;
            color: var(--text-muted);
        }
        
        .biglove-text span {
            color: var(--lux-rose);
        }
        
        /* =====================================================
           MOBILE RESPONSIVE
           ===================================================== */
        
        @media (max-width: 768px) {
            .architect {
                position: fixed;
                right: -100%;
                top: 0;
                width: 85%;
                max-width: 320px;
                z-index: 1000;
                transition: right 0.3s ease;
            }
            
            .architect.open {
                right: 0;
            }
            
            .mobile-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                z-index: 999;
            }
            
            .mobile-overlay.open {
                display: block;
            }
            
            .dashboard {
                padding: var(--space-5);
            }
            
            .welcome-title {
                font-size: 1.5rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .action-cards {
                grid-template-columns: 1fr;
            }
        }
        
        /* =====================================================
           ANIMATIONS
           ===================================================== */
        
        @keyframes pulse-gold {
            0%, 100% { box-shadow: 0 0 5px var(--glass-glow); }
            50% { box-shadow: 0 0 20px var(--glass-glow); }
        }
        
        .pulse {
            animation: pulse-gold 2s ease-in-out infinite;
        }

    .info-btn {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.75rem;
            color: var(--text-muted);
            cursor: pointer;
            opacity: 0.5;
            transition: all 0.2s;
        }
        
        .info-btn:hover {
            opacity: 1;
            color: var(--lux-gold);
        }
        
        .feature-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }
        
        .feature-modal.open {
            opacity: 1;
            visibility: visible;
        }
        
        .feature-content {
            background: var(--bg-nebula);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 24px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }
        
        .feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--lux-gold);
            margin-bottom: 12px;
        }
        
        .feature-desc {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .feature-status {
            display: inline-block;
            padding: 6px 16px;
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--lux-gold);
            border-radius: 20px;
            color: var(--lux-gold);
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 16px;
        }
        
        .feature-close {
            padding: 12px 32px;
            background: var(--bg-glass);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .feature-close:hover {
            background: var(--bg-glass-hover);
            border-color: var(--lux-gold);
        }

    </style>
</head>
<body>
    
    <!-- Cosmic Background -->
    <div class="cosmic-bg"></div>
    
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>
    
    <!-- App Container -->
    <div class="app-container">
        <!-- LEFT SIDEBAR - PROJECT SWITCHER -->
        <aside class="project-switcher-sidebar" id="projectSwitcherSidebar">
            <div class="switcher-header">
                <div class="switcher-title">üìÇ Projects</div>
                <button class="switcher-new-btn" onclick="openNewProjectModal()">+</button>
            </div>
            
            <div class="switcher-current">
                <div class="current-label">Active</div>
                <div class="current-project" id="currentProjectDisplay">
                    <span class="project-icon">üìÑ</span>
                    <span class="project-name" id="currentProjectName">No Project</span>
                </div>
            </div>
            
            <div class="switcher-divider"></div>
            
            <div class="switcher-projects">
                <div class="projects-label">All Projects</div>
                <div class="projects-list" id="projectsList">
                    <!-- Projects will load here -->
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            
            <!-- Header -->
            <header class="header">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 40 40" width="32" height="32">
                        <circle cx="20" cy="20" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
                        <circle cx="20" cy="20" r="3" fill="currentColor"/>
                        <path d="M4 20 Q12 8 20 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M36 20 Q28 8 20 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M20 28 Q20 35 14 38" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span class="logo-text">THE BLOCK</span>
                </div>
                <div class="header-actions">
                    <button class="btn-icon" id="btnArchitect" title="Open Architect">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7"/>
                            <rect x="14" y="3" width="7" height="7"/>
                            <rect x="14" y="14" width="7" height="7"/>
                            <rect x="3" y="14" width="7" height="7"/>
                        </svg>
                    </button>
                </div>
            </header>
            
            <!-- Dashboard -->
            <div class="dashboard">
                
                <!-- Welcome Section -->
                <div class="welcome-section">
                    <h1 class="welcome-title">Welcome back, <strong id="userName">Writer</strong></h1>
                    <p class="welcome-subtitle">Where Writer's Block Becomes Writer's Gift</p>
                </div>
                
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-value" id="totalWords">0</div>
                        <div class="stat-label">Words Written</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìö</div>
                        <div class="stat-value" id="totalProjects">0</div>
                        <div class="stat-label">Projects</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üîÆ</div>
                        <div class="stat-value" id="currentRealm">1</div>
                        <div class="stat-label">Current Realm</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-value" id="streak">0</div>
                        <div class="stat-label">Day Streak</div>
               </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h2 class="section-title">Quick Actions</h2>
                    <div class="action-cards">
                        <a href="editor.html?new=true" class="action-card">
                            <div class="action-icon">‚ú®</div>
                            <div class="action-info">
                                <h3>Start New Draft</h3>
                                <p>Begin a fresh creative journey</p>
                            </div>
                        </a>
                        <a href="#" class="action-card" id="continueWriting">
                            <div class="action-icon">üìñ</div>
                            <div class="action-info">
                                <h3>Continue Writing</h3>
                                <p>Pick up where you left off</p>
                            </div>
                        </a>
                        <a href="projects.html" class="action-card">
                            <div class="action-icon">üìö</div>
                            <div class="action-info">
                                <h3>All Projects</h3>
                                <p>Manage your manuscripts</p>
                            </div>
                        </a>
                        <a href="#" class="action-card" id="openCompost">
                            <div class="action-icon">üå±</div>
                            <div class="action-info">
                                <h3>Compost Bin</h3>
                                <p>Mine ideas from deleted drafts</p>
                            </div>
                        </a>
                    </div>
                </div>
                
            </div>
            <!-- New Project Modal -->
        <div class="modal-overlay" id="newProjectModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: var(--bg-nebula); border-radius: 10px; padding: 30px; max-width: 400px; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                <h2 style="margin: 0 0 20px 0; color: var(--text-bright);">üìù New Project</h2>
                <input type="text" id="projectName" placeholder="Enter project title..." style="width: 100%; padding: 12px; border: 1px solid var(--glass-border); border-radius: 5px; margin-bottom: 20px; font-size: 14px; background: var(--bg-stardust); color: var(--text-primary);" autofocus>
                <div style="display: flex; gap: 10px;">
                    <button onclick="closeNewProjectModal()" style="flex: 1; padding: 12px; background: var(--bg-glass); border: 1px solid var(--glass-border); border-radius: 5px; color: var(--text-primary); cursor: pointer; font-weight: bold;">Cancel</button>
                    <button onclick="createNewProjectFromModal()" style="flex: 1; padding: 12px; background: var(--lux-gold); border: none; border-radius: 5px; color: var(--bg-void); cursor: pointer; font-weight: bold;">Create</button>
                </div>
            </div>
        </div>
        </main>
        
        <!-- THE ARCHITECT - Right Sidebar -->
        <aside class="architect" id="architect">
            
            <!-- Soul ID -->
            <div class="soul-id">
                <div class="passport" id="passport">
                    <div class="passport-avatar" id="userAvatar">W</div>
                    <div class="passport-info">
                        <div class="passport-name" id="passportName">Writer</div>
                        <div class="passport-tier">FREE TIER</div>
                    </div>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </div>
                
                <div class="zen-switch">
                    <span class="zen-label">Zen Mode</span>
                    <div class="toggle" id="zenToggle">
                        <div class="toggle-knob"></div>
                    </div>
                </div>
            </div>
            
            <!-- Architect Tools -->
            <div class="architect-tools">
                
                <!-- The Shelf -->
                <div class="tool-section">
                    <div class="tool-section-title">Workspace</div>
                    
                    <div class="tool-item" id="shelfToggle">
                        <div class="tool-icon">üìö</div>
                        <span class="tool-label">The Shelf</span>
                        <span class="tool-badge" id="projectCount">0</span>
                        <span class="info-btn" onclick="event.stopPropagation(); showFeatureInfo('shelf')">‚ìò</span>
                    </div>
                    
                    <div class="shelf-projects" id="shelfProjects">
                        <!-- Projects will be inserted here -->
                        <div class="project-item new-draft" id="newDraftBtn">
                            <span>+</span>
                            <span>New Draft</span>
                        </div>
                    </div>
                    
                    <div class="tool-item" onclick="window.location.href='vial.html'">
                        <span class="tool-icon">üîÆ</span>
                        <span class="tool-label">The Vial</span>
                        <span class="info-btn" onclick="event.stopPropagation(); showFeatureInfo('vial')">‚ìò</span>
                    </div>
                    
                   <div class="tool-item" onclick="window.location.href='loom.html'">
                        <span class="tool-icon">üßµ</span>
                        <span class="tool-label">The Loom</span>
                        <span class="info-btn" onclick="event.stopPropagation(); showFeatureInfo('loom')">‚ìò</span>
                    </div>
                    
                    <div class="tool-item" onclick="window.location.href='character.html'">
                        <span class="tool-icon">üë•</span>
                        <span class="tool-label">Character Deck</span>
                        <span class="info-btn" onclick="event.stopPropagation(); showFeatureInfo('character')">‚ìò</span>
                    </div>
                </div>
                
                <!-- Gardener -->
                <div class="tool-section">
                    <div class="tool-section-title">Gardener</div>
                    
                    <div class="tool-item" onclick="window.location.href='compost.html'">
                        <span class="tool-icon">üå±</span>
                        <span class="tool-label">Compost Bin</span>
                        <span class="info-btn" onclick="event.stopPropagation(); showFeatureInfo('compost')">‚ìò</span>
                    </div>
                    
                   <div class="tool-item" onclick="window.location.href='grimoire.html'">
                        <span class="tool-icon">üìñ</span>
                        <span class="tool-label">The Grimoire</span>
                        <span class="info-btn" onclick="event.stopPropagation(); showFeatureInfo('grimoire')">‚ìò</span>
                    </div>
                </div>
                <!-- Settings -->
                <div class="tool-section">
                    <div class="tool-section-title">System</div>
                    
<div class="tool-item" id="settingsBtn" onclick="window.location.href='settings.html'">
                        <div class="tool-icon">‚öôÔ∏è</div>
                        <span class="tool-label">Settings</span>
                    </div>
                    
                    <div class="tool-item" id="contactBtn">
                        <div class="tool-icon">üìß</div>
                        <span class="tool-label">Contact</span>
                    </div>
                    
                    <div class="tool-item" id="aiEthicsBtn">
                        <div class="tool-icon">ü§ñ</div>
                        <span class="tool-label">Ethical A.I.</span>
                    </div>
                    
                    <div class="tool-item" id="logoutBtn">
                        <div class="tool-icon">üö™</div>
                        <span class="tool-label">Sign Out</span>
                    </div>
                </div>
                
            </div>
            
            <!-- The Portal -->
            <div class="architect-footer">
                <div class="portal-grid">
                    <a href="#" class="portal-item" title="Electric Lady Grand Studios">
                        <span class="portal-icon">üé∏</span>
                        <span class="portal-label">ELGS</span>
                    </a>
                    <a href="#" class="portal-item" title="PRISM Search">
                        <span class="portal-icon">üî∫</span>
                        <span class="portal-label">PRISM</span>
                    </a>
                    <a href="#" class="portal-item" title="Lyric Bird">
                        <span class="portal-icon">üê¶</span>
                        <span class="portal-label">LYRIC</span>
                    </a>
                </div>
                
                <div class="biglove-footer">
                    <p class="biglove-text">Part of <span>BIG LOVE</span> Holdings</p>
                </div>
            </div>
            
        </aside>
        
    </div>
    
<!-- Local Auth System -->
    <script>
        window.LocalAuth = {
            signOut: async () => {
                localStorage.removeItem('theblock_current_user');
                return true;
            },
            
            getUser: async () => {
                const user = localStorage.getItem('theblock_current_user');
                return user ? JSON.parse(user) : null;
            }
        };
        
        // Make it available as SupabaseAuth for compatibility
        window.SupabaseAuth = window.LocalAuth;
        
        console.log('‚ú¶ Local Auth ready');
        // New Project Modal Functions
        function openNewProjectModal() {
            document.getElementById('newProjectModal').style.display = 'flex';
            document.getElementById('projectName').focus();
        }

        function closeNewProjectModal() {
            document.getElementById('newProjectModal').style.display = 'none';
            document.getElementById('projectName').value = '';
        }

        function createNewProjectFromModal() {
            const title = document.getElementById('projectName').value.trim();
            
            if (!title) {
                alert('Please enter a project title');
                return;
            }

            const newProject = projectSwitcher.createAndSetProject(title);
            closeNewProjectModal();
            loadProjectSwitcher();
            
            alert(`‚úÖ Project "${title}" created!`);
        }

        // Close modal on outside click
        document.getElementById('newProjectModal').addEventListener('click', (e) => {
            if (e.target.id === 'newProjectModal') {
                closeNewProjectModal();
            }
        });

        // Enter key to create
        document.getElementById('projectName').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                createNewProjectFromModal();
            }
        });
    </script>
    
<!-- App Script -->
    <script>
        // Wait for DOM to load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('‚ú¶ THE BLOCK Dashboard initializing...');
            
            // Check auth
            checkAuth();
            
            // Bind events
            bindEvents();
            
            // Load data
            loadDashboardData();
        });
        
        // Auth check
        async function checkAuth() {
            try {
                const user = await SupabaseAuth.getUser();
                if (!user) {
                    window.location.href = 'auth.html';
                    return;
                }
                
                // Update UI with user info
                const name = user.user_metadata?.name || user.email.split('@')[0];
                document.getElementById('userName').textContent = name;
                document.getElementById('passportName').textContent = name;
                document.getElementById('userAvatar').textContent = name.charAt(0).toUpperCase();
                
                console.log('‚ú¶ User authenticated:', user.email);
            } catch (error) {
                console.log('‚ú¶ Auth check failed, redirecting...');
                window.location.href = 'auth.html';
            }
        }
        
        // Bind events
        function bindEvents() {
            // Mobile architect toggle
            const btnArchitect = document.getElementById('btnArchitect');
            const architect = document.getElementById('architect');
            const overlay = document.getElementById('mobileOverlay');
            
            btnArchitect?.addEventListener('click', () => {
                architect.classList.toggle('open');
                overlay.classList.toggle('open');
            });
            
            overlay?.addEventListener('click', () => {
                architect.classList.remove('open');
                overlay.classList.remove('open');
            });
            
            // Shelf toggle
            const shelfToggle = document.getElementById('shelfToggle');
            const shelfProjects = document.getElementById('shelfProjects');
            
            shelfToggle?.addEventListener('click', () => {
                shelfProjects.classList.toggle('open');
            });
            
            // New draft
            const newDraftBtn = document.getElementById('newDraftBtn');
            newDraftBtn?.addEventListener('click', () => {
                window.location.href = 'editor.html?new=true';
            });
            
        // Zen toggle (switches theme)
            const zenToggle = document.getElementById('zenToggle');
            zenToggle?.addEventListener('click', () => {
                zenToggle.classList.toggle('active');
                document.body.classList.toggle('zen-theme');
                
                // Save preference
                const isZen = document.body.classList.contains('zen-theme');
                localStorage.setItem('theblock_theme', isZen ? 'zen' : 'midnight');
            });
            
            // Load saved theme
            const savedTheme = localStorage.getItem('theblock_theme');
            if (savedTheme === 'zen') {
                document.body.classList.add('zen-theme');
                zenToggle?.classList.add('active');
            }
            
            // Logout
            const logoutBtn = document.getElementById('logoutBtn');
            logoutBtn?.addEventListener('click', async () => {
                if (confirm('Sign out of THE BLOCK?')) {
                    try {
                        await SupabaseAuth.signOut();
                        window.location.href = 'auth.html';
                    } catch (error) {
                        window.location.href = 'auth.html';
                    }
                }
            });
        }
        
        // Load dashboard data
        function loadDashboardData() {
            const projects = JSON.parse(localStorage.getItem('theblock_projects') || '[]');
            
            let totalWords = 0;
            projects.forEach(p => {
                const words = p.content ? p.content.trim().split(/\s+/).filter(w => w).length : 0;
                totalWords += words;
            });
            
            document.getElementById('totalWords').textContent = totalWords.toLocaleString();
            document.getElementById('totalProjects').textContent = projects.length;
            document.getElementById('projectCount').textContent = projects.length;
            
            const realm = Math.min(9, Math.floor(totalWords / 1000) + 1);
            document.getElementById('currentRealm').textContent = realm;
            
            // Populate shelf
            const shelfProjects = document.getElementById('shelfProjects');
            const newDraftBtn = shelfProjects.querySelector('.new-draft');
            
            projects.forEach(project => {
                const item = document.createElement('div');
                item.className = 'project-item';
                item.innerHTML = `<span>üìÑ</span><span>${project.title || 'Untitled'}</span>`;
                item.addEventListener('click', () => {
                    window.location.href = `editor.html?id=${project.id}`;
                });
                shelfProjects.insertBefore(item, newDraftBtn);
            });
            
            // Continue writing link
            const continueBtn = document.getElementById('continueWriting');
            if (projects.length > 0) {
                const lastProject = projects[projects.length - 1];
                continueBtn.href = `editor.html?id=${lastProject.id}`;
            } else {
                continueBtn.href = 'editor.html?new=true';
            }
            
            console.log('‚ú¶ Dashboard ready');
        }


        // Load project switcher
        function loadProjectSwitcher() {
            const projects = projectSwitcher.getAllProjects();
            const currentProject = projectSwitcher.getCurrentProject();
            const projectsList = document.getElementById('projectsList');
            const currentProjectName = document.getElementById('currentProjectName');

            // Update current project display
            if (currentProject) {
                currentProjectName.textContent = currentProject.title || 'Untitled';
            } else {
                currentProjectName.textContent = 'No Project';
            }

            // Clear list
            projectsList.innerHTML = '';

            // Add each project
            projects.forEach(project => {
                const wordCount = project.content ? project.content.trim().split(/\s+/).length : 0;
                const isActive = currentProject && currentProject.id === project.id;

                const item = document.createElement('div');
                item.className = `project-item-sidebar ${isActive ? 'active' : ''}`;
                item.innerHTML = `
                    <span class="project-icon">üìÑ</span>
                    <span class="project-item-name">${project.title || 'Untitled'}</span>
                    <span class="project-item-words">${wordCount}</span>
                `;

                item.addEventListener('click', () => {
                    projectSwitcher.setCurrentProject(project.id);
                    loadProjectSwitcher();
                    alert(`Switched to: ${project.title}`);
                });

                projectsList.appendChild(item);
            });
        }

        // Call on load
        document.addEventListener('DOMContentLoaded', () => {
            loadProjectSwitcher();
        });


    </script>
    <!-- Feature Info Modal -->
    <div class="feature-modal" id="featureModal" onclick="closeFeatureModal()">
        <div class="feature-content" onclick="event.stopPropagation()">
            <div class="feature-icon" id="featureIcon">üîÆ</div>
            <div class="feature-title" id="featureTitle">The Vial</div>
            <div class="feature-status" id="featureStatus">Coming Soon</div>
            <div class="feature-desc" id="featureDesc">Description here</div>
            <button class="feature-close" onclick="closeFeatureModal()">Got it!</button>
        </div>
    </div>
    
    <script>
        const featureInfo = {
            vial: {
                icon: 'üîÆ',
                title: 'The Vial',
                status: 'Coming Soon',
                desc: 'Your Creative DNA. Store your writing preferences, themes you love, and style fingerprint. The AI learns YOUR unique voice over time and adapts to help you write more authentically.'
            },
            loom: {
                icon: 'üßµ',
                title: 'The Loom',
                status: 'Coming Soon',
                desc: 'Plot Builder & Beat Sheets. Structure your story with proven frameworks (Save the Cat, 3-Act, Hero\'s Journey). Drag & drop scene cards, visualize timelines, and track character arcs.'
            },
            character: {
                icon: 'üë•',
                title: 'Character Deck',
                status: 'Coming Soon',
                desc: 'Deep character development. Create bio cards with personality, backstory, traits, and motivations. Build relationship webs and define how each character speaks.'
            },
            compost: {
                icon: 'üå±',
                title: 'Compost Bin',
                status: 'Coming Soon',
                desc: 'Nothing is wasted! Deleted drafts become nutrients for future ideas. The AI mines your compost for inspiration, turning old fragments into new creative sparks.'
            },
            grimoire: {
                icon: 'üìñ',
                title: 'The Grimoire',
                status: 'Coming Soon',
                desc: 'Your magical dictionary. Thesaurus, vocabulary tools, and "Psychedelic Synonym" mode for finding unexpected word choices. Genre-specific vocabulary at your fingertips.'
            },
            shelf: {
                icon: 'üìö',
                title: 'The Shelf',
                status: 'Active',
                desc: 'Your project library. All your drafts, stories, and works-in-progress organized in one place. Create new drafts, continue writing, and manage your creative portfolio.'
            }
        };
        
        function showFeatureInfo(feature) {
            const info = featureInfo[feature];
            if (!info) return;
            
            document.getElementById('featureIcon').textContent = info.icon;
            document.getElementById('featureTitle').textContent = info.title;
            document.getElementById('featureStatus').textContent = info.status;
            document.getElementById('featureDesc').textContent = info.desc;
            document.getElementById('featureModal').classList.add('open');
        }
        
        function closeFeatureModal() {
            document.getElementById('featureModal').classList.remove('open');
        }
    </script>
<script src="js/project-switcher.js"></script>

</body>
</html>